<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright 2012 Agorava
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~   http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
<html xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">
<ui:composition>
	<p:dataList id="#{id}" var="tweet" type="none" value="#{timeline}">
		<p:panel>
			<h:panelGrid columns="3" cellpadding="10"
				columnClasses="verticalTop,verticalTopFixed,verticalTop">
				<p:column>
					<p:graphicImage id="pict" value="#{tweet.profileImageUrl}"
						height="48" width="48" />
					<p:tooltip for="pict" value="#{tweet.fromUser}" showEffect="fold" />
				</p:column>
				<p:column style="width:200px;">
					<!--<h:outputText value="@#{twitterUserServiceImpl.getUserProfile(tweet.fromUser).fullName}" styleClass="author"/>-->
					<!--<br/> -->
					<h:outputLink value="https://twitter.com/#!/#{tweet.fromUser}">
						<h:outputText value="@#{tweet.fromUser}" styleClass="author" />
					</h:outputLink>
					<br />
					<h:outputText value="${tweet.text}" escape="false" />
					<br />
					<!--${tweet.languageCode}-->
					<!--<br/>-->

					<p:fieldset legend="En réponse à " toggleable="true"
						rendered="#{not empty tweet.inReplyToStatusId}">
						<h:outputText
							value="@#{twitterTimelineServiceImpl.getStatus(tweet.inReplyToStatusId).fromUser}"
							styleClass="author" />
						<br />
						<h:outputText
							value="#{twitterTimelineServiceImpl.getStatus(tweet.inReplyToStatusId).text}"
							styleClass="reponse" />

					</p:fieldset>
				</p:column>

				<p:column>
					<h:outputText value="#{tweet.createdAt}" styleClass="tweetInfo">
						<f:converter converterId="org.ocpsoft.PrettyTimeConverter" />
					</h:outputText>
					<br />
					<h:outputText value="via ${tweet.source}" escape="false"
						styleClass="tweetInfo" />
				</p:column>

			</h:panelGrid>
			<p:commandButton actionListener="a"
				icon="ui-icon ui-icon-arrowreturnthick-1-w" title="Répondre"
				update="#{id}" />
			<p:commandButton
				actionListener="#{twitterTimelineServiceImpl.addToFavorites(tweet.id)}"
				icon="ui-icon ui-icon-star" title="Add to favorites" update="#{id}" />
			<p:commandButton
				actionListener="#{twitterTimelineServiceImpl.retweet(tweet.id)}"
				icon="retweet" title="Retweet" update="#{id}" />

		</p:panel>
	</p:dataList>
	<p:poll interval="120" update="#{id}" />
</ui:composition>
</html>